(this["webpackJsonpreact-shopping-cart"]=this["webpackJsonpreact-shopping-cart"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(2),l=a.n(c),o=(a(14),a(8)),s=a(3),i=a(4),m=a(6),u=a(5),d=a(7),h=function(e){return"$"+Number(e.toFixed(1)).toLocaleString()+" "},p=function(e){var t=e.products,a=e.handleAddToCart,n=t.map((function(e){return r.a.createElement("div",{className:"col-lg-4 mb-3 text-center",key:e.id},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},e.title),r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:"products/".concat(e.sku,"_2.jpg"),alt:e.title}),r.a.createElement("p",null,e.description),h(e.price)),r.a.createElement("div",{className:"card-footer "},r.a.createElement("button",{className:"btn btn-primary",onClick:function(t){return a(t,e)}},"Add To Cart"))))}));return r.a.createElement("div",{className:"row"},n)},v=function(e){var t=e.count,a=e.sort,n=e.size,c=e.handleSortChange,l=e.handleSizeChange;return r.a.createElement("div",{className:"d-flex justify-content-between mb-3 flex-wrap"},r.a.createElement("div",{className:"mb-3 mb-lg-0"},"".concat(t," products found.")),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",null,r.a.createElement("div",{className:"form-inline mr-3"},r.a.createElement("label",{className:"mr-2"},"Order by"),r.a.createElement("select",{className:"form-control",value:a,onChange:c},r.a.createElement("option",{value:""},"Select"),r.a.createElement("option",{value:"lowestprice"},"Lowest to highest"),r.a.createElement("option",{value:"highestprice"},"Highest to lowest")))),r.a.createElement("div",null,r.a.createElement("div",{className:"form-inline"},r.a.createElement("label",{className:"mr-2"}," Filter Size"),r.a.createElement("select",{className:"form-control",value:n,onChange:l},r.a.createElement("option",{value:""},"ALL"),r.a.createElement("option",{value:"x"},"XS"),r.a.createElement("option",{value:"s"},"S"),r.a.createElement("option",{value:"m"},"M"),r.a.createElement("option",{value:"l"},"L"),r.a.createElement("option",{value:"xl"},"XL"),r.a.createElement("option",{value:"xxl"},"XXL"))))))},f=(a(15),function(e){var t=e.cartItems,a=e.handleRemoveFromCart;return r.a.createElement("div",null,0===t.length?r.a.createElement("div",{className:"alert alert-danger"},"Basket is empty "):r.a.createElement("div",null,"You have ",t.length," items in the basket. ",r.a.createElement("hr",null)),t.length>0&&r.a.createElement("div",null,r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e.id},r.a.createElement("h6",{className:"card-title"},e.title),r.a.createElement("div",{className:"d-flex justify-content-between  align-items-center"},e.count," * ",h(e.price),r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){return a(t,e)}},"X")))})),r.a.createElement("li",{className:"list-group-item"},r.a.createElement("b",null,"Total: ",h(t.reduce((function(e,t){return e+t.price*t.count}),0)))," ")),r.a.createElement("button",{onClick:function(){return alert("Todo: Implement checkout page.")},className:"btn btn-success btn-block my-3"},"checkout")))}),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).listProducts=function(){a.setState((function(e){return"lowestprice"===e.sort?e.products.sort((function(e,t){return e.price>t.price?1:-1})):"highestprice"===e.sort?e.products.sort((function(e,t){return e.price<t.price?1:-1})):e.products.sort((function(e,t){return e.id>t.id?1:-1})),""!==e.size?{filteredProducts:e.products.filter((function(t){return t.availableSizes.indexOf(e.size.toUpperCase())>=0}))}:{filteredProducts:e.products}}))},a.handleAddToCart=function(e,t){var n=a.state.cartItems,r=!1;n.forEach((function(e){e.id===t.id&&(e.count+=1,r=!0)})),r||n.push(Object(o.a)({},t,{count:1})),localStorage.setItem("cartItems",JSON.stringify(n)),a.setState({cartItems:n})},a.handleRemoveFromCart=function(e,t){var n=a.state.cartItems.filter((function(e){return e.id!==t.id}));localStorage.setItem("cartItems",JSON.stringify(n)),a.setState({cartItems:n})},a.handleSortChange=function(e){console.log(e.target.value),a.setState({sort:e.target.value}),a.listProducts()},a.handleSizeChange=function(e){console.log(e.target.value),a.setState({size:e.target.value}),a.listProducts()},a.state={products:[],filteredProducts:[],cartItems:[],size:"",sort:"lowestprice"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:9000/products").then((function(e){return e.json()})).catch((function(e){console.log(e),fetch("db.json").then((function(e){return e.json()})).then((function(e){return e.products}))})).then((function(t){console.log(t),e.setState({products:t}),e.listProducts()})),localStorage.getItem("cartItems")&&this.setState({cartItems:JSON.parse(localStorage.getItem("cartItems"))})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-brand"},"Shopping Cart")),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row pt-3"},r.a.createElement("div",{className:"col-lg-9 order-2 order-lg-1"},r.a.createElement(v,{count:this.state.filteredProducts.length,sort:this.state.sort,size:this.state.size,handleSortChange:this.handleSortChange,handleSizeChange:this.handleSizeChange}),r.a.createElement(p,{products:this.state.filteredProducts,handleAddToCart:this.handleAddToCart})),r.a.createElement("div",{className:"col-lg-3 order-1 order-lg-2"},r.a.createElement("h5",{className:"mb-4"},"Your Shopping Cart"),r.a.createElement(f,{cartItems:this.state.cartItems,handleRemoveFromCart:this.handleRemoveFromCart})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.ca90ea57.chunk.js.map